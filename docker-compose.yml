services:
  selenium:
    image: selenium/standalone-chrome:latest
    shm_size: 512m

  dagster:
    image: dagster/dagster-webserver:latest
    environment:
      - DAGSTER_HOME=/opt/dagster/dagster_home
      - SELENIUM_REMOTE_URL=http://selenium:4444/wd/hub
    volumes:
      - ./dagster_repo:/opt/dagster/app
      - ../scraper_repo:/opt/scraper
      - ./dagster_home:/opt/dagster/dagster_home
    ports:
      - "8080:3000"   # ðŸ‘ˆ AQUÃ
    depends_on:
      - selenium
    command: >
      bash -lc "
      pip install --no-cache-dir selenium &&
      dagster-webserver -h 0.0.0.0 -p 3000 -f /opt/dagster/app/__init__.py
      "
